name: Set Supabase Secrets

on:
  workflow_dispatch:

jobs:
  set-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Set HIVE_API_KEY
        run: |
          curl -X POST \
            'https://api.supabase.com/v1/projects/freeujycdwhgtqbytrgz/secrets' \
            -H 'Authorization: Bearer ${{ secrets.SUPABASE_ACCESS_TOKEN }}' \
            -H 'Content-Type: application/json' \
            -d '[{"name": "HIVE_API_KEY", "value": "Hjsn51qXupHPpbes"}]'

      - name: Set EAS_SIGNER_PRIVATE_KEY
        run: |
          curl -X POST \
            'https://api.supabase.com/v1/projects/freeujycdwhgtqbytrgz/secrets' \
            -H 'Authorization: Bearer ${{ secrets.SUPABASE_ACCESS_TOKEN }}' \
            -H 'Content-Type: application/json' \
            -d '[{"name": "EAS_SIGNER_PRIVATE_KEY", "value": "0x18da82925c46ea8df6a573a08255672427ec1abbfeda86ff0dbeefd184dc27e2"}]'

      - name: Confirm
        run: echo "Both secrets set successfully on project freeujycdwhgtqbytrgz"
